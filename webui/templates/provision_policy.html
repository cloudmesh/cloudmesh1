{% extends "layout_title.html" %}
{% from "_helper.html" import image_button %}

{% block contentbox %}
<h2>Provision Policy</h2>
{% endblock %}

{% block content %}


<h3>User Policies</h3>
<form>
<table>
	<tr>
		<th> User </th>			
		<th> Policy </th>			
	</tr>
	{% for name in policy.users %}
	   		{% for pol in policy.users[name] %}
		   	<tr> 
		   		<td> {{ image_button ("right", "016_bin", "/cm/policy/delete/" + name + "/" + pol) }}</td>
		   		<td> {{name}} </td>
		   		<td> {{pol}} </td>
		   </tr>
		   	{% endfor %}
	{% endfor %}
	<tr>
		<td> {{ image_button ("none", "190_circle_plus", "/cm/policy/user/add/") }}
      	</td>
		<td>
			<input type="text" name="username">	
		</td>
		<td>
			<input type="text" name="userhostlist">	
		</td>
	</tr>
</table>
</form>


<h3>Project Policies</h3>
<form>
<table>
	<tr>
		<th> Project </th>			
		<th> Policy </th>			
	</tr>
	{% for name in policy.projects %}
	   		{% for pol in policy.projects[name] %}
		   	<tr> 
		   		<td> {{ image_button ("right", "016_bin", "/cm/policy/delete/" + name + "/" + pol) }}</td>
		   		<td> {{name}} </td>
		   		<td> {{pol}} </td>
		   </tr>
		   	{% endfor %}
	{% endfor %}
	<tr>
		<td> {{ image_button ("none", "190_circle_plus", "/cm/policy/project/add/") }}
      	</td>
		<td>
			<input type="text" name="projectname">	
		</td>
		<td>
			<input type="text" name="projecthostlist">	
		</td>
	</tr>
</table>
</form>

<h3>Project Policies</h3>
<table>
	<tr>
		<th> User </th>			
		<th> Policy </th>			
	</tr>
	{% for name in policy.projects %}
		<tr>
			<td> {{ name }} </td>
			<td> {{ policy.projects[name] | join("<br>") |safe}} </td>
	   </tr>
	{% endfor %}
	
</table>

{% endblock content %}

