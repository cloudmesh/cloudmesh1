{% extends "layout_title.html" %}

{% from "_helper.html" import image_button %}

{% macro image_workflow(dir, name,type,width=None, height=None) %}
   <!--Width={{width}}<br>
   Height={{Height}}<br>
   -->
   <img src="{{dir}}{{name}}.{{type}}" cache="no-cache"/>
{% endmacro %}

{% block contentbox %}
<h2>Workflow Provision Form</h2>
{% endblock %}

{% block content %}



<form method="POST" action="">
{{ form.csrf_token }}

<input type="submit" value="Redraw"><br>

{{form.workflow(rows="5", cols="256")}}<br>



</form>

<div id="workflow_drawing_container">
</div>

<script type="text/javascript">
    function newimg(dir,name,type){
        dummytag = Math.random().toString();
        strval = "<img src=\"" + dir + name + "." + type + "?" + dummytag + "\"/>";
        return strval;
    }
    function redraw(){
        $('#workflow_drawing_container').html(newimg("{{dir}}", "{{filename}}", "svg"));
    }
    $(document).ready(redraw());
</script>

{% endblock %}
